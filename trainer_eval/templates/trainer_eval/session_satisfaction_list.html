{% extends "trainings/base.html" %}
{% block title %}Satisfaction sessions{% endblock %}

{% block content %}
<div style="max-width:95vw; margin:0 auto; padding:18px 16px;">

  <h1 style="margin:0 0 10px;">Satisfaction — Sessions</h1>
  <div style="color:#64748b; margin-bottom:16px;">
    Modifie directement <code>Session.client_satisfaction</code> (note /20). Visible staff uniquement.
  </div>

  <div style="overflow:auto; border:1px solid rgba(255,255,255,0.08); border-radius:12px;">
    <table style="width:100%; min-width:1100px; border-collapse:collapse;">
      <thead>
        <tr style="text-align:left; background:rgba(255,255,255,0.04);">
          <th style="padding:10px;">Date</th>
          <th style="padding:10px;">Formation</th>
          <th style="padding:10px;">Formateur</th>
          <th style="padding:10px;">Satisfaction</th>
          <th style="padding:10px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for s in sessions %}
          <tr style="border-top:1px solid rgba(255,255,255,0.06);">
            <td style="padding:10px;">{{ s.start_date|date:"d/m/Y" }}</td>
            <td style="padding:10px;">{{ s.training }}</td>
            <td style="padding:10px;">{{ s.trainer }}</td>

            <td style="padding:10px;">
              {% if s.client_satisfaction is not None %}
                <span style="padding:4px 8px; border-radius:999px; background:rgba(34,197,94,0.15); border:1px solid rgba(34,197,94,0.25);">
                  {{ s.client_satisfaction }}/20
                </span>
              {% else %}
                <span style="padding:4px 8px; border-radius:999px; background:rgba(245,158,11,0.15); border:1px solid rgba(245,158,11,0.25);">
                  À saisir
                </span>
              {% endif %}
            </td>

            <td style="padding:10px;">
              <a class="btn" href="{% url 'trainer_eval:session_satisfaction_edit' s.id %}">Modifier</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}